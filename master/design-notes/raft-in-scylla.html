

<!DOCTYPE html>
<html class="no-js" lang="en">
    
    

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width initial-scale=1" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>
             Intro | Scylla Docs 
        </title>
        <meta name="description" content="Scylla is an Apache Cassandra-compatible NoSQL data store that can handle 1 million transactions per second on a single server." />
        <link rel="icon" href="../_static/img/favicon.ico" type="image/x-icon" />
        <link rel="icon" href="../_static/img/favicon-32x32.png" sizes="32x32" />
        <link rel="icon" href="../_static/img/favicon-228x228.png" sizes="192x192" />
        <link rel="apple-touch-icon" href="../_static/img/favicon-228x228.png" />
        <meta name="msapplication-TileImage" href="../_static/img/favicon-228x228.png" />

        
            
            
        

        
            
            <link rel="canonical" href="https://scylla.docs.scylladb.com/stable/design-notes/raft-in-scylla.html"/>
        

        <link rel="author" href="mailto:info@scylladb.com" />

        
            
        <!-- increase expertrec loading priority-->
        <link rel="dns-prefetch" href="https://cse.expertrec.com">

        <!-- increase font loading priority -->
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="preload" as="style"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- async CSS -->
        <link rel="stylesheet" media="print" onload="this.onload=null;this.removeAttribute('media');"
            href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />

        <!-- no-JS fallback -->
        <noscript>
            <link rel="stylesheet"
                href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,400;0,500;0,700;1,400&display=swap" />
        </noscript>
        
            
                <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../_static/css/main.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../_static/sphinx_collapse.css" />
            
        
            
                <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
            
        
    
        
        
            

        <script type="text/javascript" id="documentation_options" data-url_root="../"
            src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/js/runtime.bundle.js"></script>
        <script type="text/javascript" src="../_static/js/main.bundle.js"></script>
        
            
                <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
            
        
            
        
            
                <script src="../_static/underscore.js"></script>
            
        
            
                <script src="../_static/doctools.js"></script>
            
        
            
                <script src="../_static/clipboard.min.js"></script>
            
        
            
                <script src="../_static/copybutton.js"></script>
            
        
    
            <!-- Google Tag Manager -->
<script>
    (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
            "gtm.start": new Date().getTime(),
            event: "gtm.js"
        });
        var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-T8P2JP");
</script>
<!-- End Google Tag Manager -->

<!-- Expertrec -->
<script>
    var id = "e2077224-9ccf-11e9-a0c9-0242ac130002";
    var ci_search = document.createElement("script");
    ci_search.type = "text/javascript";
    ci_search.async = true;
    ci_search.src = "https://cse.expertrec.com/api/js/ci_common.js?id=" + id;
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(ci_search, s);
</script>
<!-- End Expertrec -->
        
        <!-- Font Awesome -->
        <script src="https://kit.fontawesome.com/b1870adf6a.js" crossorigin="anonymous"></script>
        <!-- End Font Awesome -->
    </head>

    <body>
        
        <header class="header">
    <div class="header-logo">
        <a class="header-logo__img" href="https://scylladb.com/">
            <img src="../_static/img/logo-docs.svg" alt="Scylla Documentation Logo" />
        </a>
        <span class="header-logo__bar"></span>
        <a class="header-logo__text" href="https://docs.scylladb.com/">
            Documentation
        </a>
    </div>
    <div class="header-navigation">
        <ul class="dropdown menu scylla-dropdown scylla-dropdown--header" data-dropdown-menu>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Server
                    <i class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--about-us"></i>
                            Scylla Open Source
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--enterprise"></i>Scylla Enterprise
                        </a>
                    </li>
                    <li>
                        <a href="https://scylla.docs.scylladb.com/stable/alternator/alternator.html">
                            <i class="scylla-icon scylla-icon--overview"></i>
                            Scylla Alternator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Cloud <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://cloud.scylladb.com/">
                            <i class="scylla-icon scylla-icon--cloud"></i>Scylla Cloud</a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/scylla-cloud/">
                            <i class="scylla-icon scylla-icon--cloud-docs"></i>Scylla Cloud
                            Docs</a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Tools <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://manager.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--manager"></i>Scylla Manager</a>
                    </li>
                    <li>
                        <a href="https://monitoring.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--monitoring"></i>Scylla
                            Monitoring Stack</a>
                    </li>
                    <li>
                        <a href="https://operator.docs.scylladb.com/">
                            <i class="scylla-icon scylla-icon--operator"></i>Scylla Operator
                        </a>
                    </li>
                </ul>
            </li>
            <li class="scylla-dropdown__item">
                <a href="#" class="scylla-dropdown__title">Drivers <i
                    class="chevron scylla-icon scylla-icon--triangle-down"></i></a>
                <ul class="menu scylla-dropdown__content">
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/cql-drivers/">
                            <i class="scylla-icon scylla-icon--nsql-guides"></i>CQL Drivers
                        </a>
                    </li>
                    <li>
                        <a href="https://docs.scylladb.com/using-scylla/drivers/dynamo-drivers/">
                            <i class="scylla-icon scylla-icon--overview"></i>DynamoDB Drivers
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <div class="header-button">
            <a href="https://www.scylladb.com/download/" class="button">Download</a>
        </div>
    </div>
    <div class="header-search-box">
        <div class="search-box">
            <ci-search></ci-search>
        </div>
    </div>
    <div class="side-nav-toggle" data-toggle="side-nav">
    <div class="side-nav-toggle__button">
        <img src="../_static/img/menu.svg" alt="Menu" />
    </div>
</div>
</header>
        <section
            class="layout  layout--sidebar layout--has-secondary-sidebar ">
            <div class="content large-order-2">
                
                    
    <div class="admonition caution">
        <p class="admonition-title">Caution</p>
        <p>
            
                You're viewing documentation for an unstable version of Scylla Dev.
            
            <a href="../../stable/index.html">Switch to the latest stable version.</a>
        </p>
    </div>

                
                
                    <div class="pre-content">
                        <div class="breadcrumbs">
    <span class="bread__item">
        <a href="https://scylla.docs.scylladb.com"
            class="bread__highlight">
            <i class="fas fa-home"></i> Scylla Dev
        </a>
    </span>
    
        <span class="bread__item">
            <a href="index.html">
                Design Notes
            </a>
        </span>
    
    <span class="bread__item bread__item--last">Intro</span>
</div>
                    </div>
                
                <p>Date: 2022-05-06</p>
<section id="intro">
<h1>Intro<a class="headerlink" href="#intro" title="Permalink to this headline">¶</a></h1>
<p>When we began implementing Raft we wanted to create a reusable and
well tested component which we could utilize for data, schema and topology
operations. This is why the Raft library in raft/ has the only dependency</p>
<ul class="simple">
<li><p>on seastar. It provides its own design documents and a README.</p></li>
</ul>
</section>
<section id="raft-application-in-scylla">
<h1>Raft application in Scylla<a class="headerlink" href="#raft-application-in-scylla" title="Permalink to this headline">¶</a></h1>
<p>In order to use the library, the client (Scylla server) needs to
provide implementations for three key interfaces:
- persistence - to persist Raft state
- rpc - to exchange messages with instances of the library
on other machines
- the client state machine - to execute commands once
they were replicated and committed on a majority of nodes.</p>
<p>Depending on the application (data, topology, or schema) Scylla can use
separate instantiations of the library with different parameters.
The term we use commonly for these instantiations is Raft groups.</p>
<p>Some applications may require multiple instantiations (groups) which share
the implementations of persistence, rpc, and client state machine. An
example is data replication where we partition the entire key range,
and use a separate replication group for one or several partitions.</p>
<p>Each group must be identified with a UUID based group id, which
works as a key both internally, when persisting the group state
or loading it at boot time, and externally, when communicating
with Raft peers of the group on other nodes.</p>
<p>For example, to persist the changes to schema and topology, Scylla
can (and does) use node-local system tables.
There are three such tables:
- <code class="docutils literal notranslate"><span class="pre">raft</span></code>, the main table which stores the Raft log for each
group. The table partition key is group id, so each log
forms its own partition. Since the table is local, this
works fine with many groups.
- <code class="docutils literal notranslate"><span class="pre">raft_snapshots</span></code>, a supporting table storing the so-called
snapshot descriptors,
- <code class="docutils literal notranslate"><span class="pre">raft_config</span></code>, a normalized part of raft
<code class="docutils literal notranslate"><span class="pre">raft_snapshots</span></code>, storing the cluster configuration
at the time of taking the snapshot. May be out of date with
the real cluster configuration, e.g. when configuration
change happens after a snapshot and is only present  in
<code class="docutils literal notranslate"><span class="pre">raft</span></code> log table.</p>
<p>The system tables are capable of storing the state of an arbitrary
number of groups, provided the group is happy with the relatively
low performance the system-table based persistence can provide.</p>
<p>Raft RPC implementation is the same for all groups. It runs on top
of the standard Scylla messaging service and uses group id as key
to route messages to the right group on a given host.
Raft persists peer addresses in its configuration, right next to
peer identifiers, and the format of the address is not restricted.
Currently IP addresses are used, just like in the rest of Scylla.</p>
<p>An own client state machine is expected to exist for each group. Right
now Scylla implements only one client state machine - the so-called
“schema state machine”, created for the only group that contains
all cluster members - the group 0.</p>
<p>A helper service which can be used to quickly get from a group id
to its Raft instance is the group registry. It’s
a sharded service which starts early at Scylla boot
and runs on all shards. The purpose of this component is to
isolate Raft service consumers within Scylla (e.g. the migration
manager for schema changes) from the logic of establishing and
maintaining the group at node start or during topology changes.</p>
</section>
<section id="the-group-0">
<h1>The group 0<a class="headerlink" href="#the-group-0" title="Permalink to this headline">¶</a></h1>
<p>The main and the only group running in Scylla now is Group 0. It
maintains the schema state machine - as stored in the system
keyspace and the schema cache. Each cluster node is a member of
this group. The group’s Raft server runs on shard 0 on each node.
Joining and leaving the group is integrated into topology
operations, and the group is started whenever a node starts.</p>
<section id="establishing-group-0-in-a-fresh-cluster">
<h2>Establishing group 0 in a fresh cluster<a class="headerlink" href="#establishing-group-0-in-a-fresh-cluster" title="Permalink to this headline">¶</a></h2>
<p>When a Scylla node starts for the first time, it must join
group 0. If there is an existing cluster, joining can be done by
sending a request to add the starting node to the group
configuration.</p>
<p>But what should the node do if there is no running cluster yet?</p>
<p>A special distributed algorithm which persists its state locally
on each node is responsible for establishing an initial Raft
configuration in a fresh cluster. We often refer to it as
“discovery” algorithm.</p>
<p>Raft group 0 has an id (UUID) just like any other group. After a
node boots, this id is persisted in <code class="docutils literal notranslate"><span class="pre">scylla_local</span></code> system table.
If this id is present, the node can start a Raft instance for
the group using the last saved state in <code class="docutils literal notranslate"><span class="pre">raft</span></code>, <code class="docutils literal notranslate"><span class="pre">raft_snapshots</span></code>
and <code class="docutils literal notranslate"><span class="pre">raft_config</span></code> system tables, which are all retrievable by
group id.
If a persisted id is missing, it means the node is bootstrapping
and haven’t joined Raft yet.</p>
<p>To find out an existing cluster, or possibly create a new one,
an instance of ‘discovery’ state machine is created. This state
machine stores its intermediate state in <code class="docutils literal notranslate"><span class="pre">discovery</span></code> system table.</p>
<p>The machine is initialized with initial contact points: the seeds
parameter of <code class="docutils literal notranslate"><span class="pre">scylla.yaml</span></code> file. Then the machine runs a discovery
loop, during which it contacts all initial seeds, and, by
induction, all nodes known to the contacted nodes. The nodes
exchange the peer information until a transitive closure of all
peers is built - i.e. there are no new nodes discovered in the
last loop iteration and all previously discovered nodes have been
contacted.</p>
<p>In the process, the discovery state machine may find a node
with an existing Raft group, in which case it sends a configuration
change request to join. Otherwise the node with the lowest Raft id
establishes a new group.</p>
<p>As you can see from this description, Raft in Scylla supports
speedy, concurrent bootstraps of multiple nodes. As soon as
streaming is ready to support it, all Scylla topology changes
can be switched to a concurrent algorithm.</p>
</section>
</section>
<section id="using-group-0-to-perform-schema-changes">
<h1>Using Group 0 to perform schema changes<a class="headerlink" href="#using-group-0-to-perform-schema-changes" title="Permalink to this headline">¶</a></h1>
<p>The main goal of adding Raft to Scylla is providing linearizability
of schema changes. The group 0 Raft log is used to share all schema
changes information across all cluster nodes, and perform schema changes
in the same order on every node. However, while Raft guarantees
that if an operation succeeds, it’s stored in the logs on the
majority of nodes, it doesn’t provide an API for strictly ordered
schema changes out of the box, for two reasons:
- Raft only stores a log of the operations. The operations
themselves - the schema changes - are applied to the client
state machine once they are committed to the log. In order
to construct a new operation it’s necessary to read the
latest state of the client state machine.
E.g. if a client wants to create a table, it’s necessary to
learn first that the table hasn’t been created already. We
could store entire CQL statements in the log and read
the state of the schema when the command is already committed
to the Raft log and is being applied: but that would make
reporting erros back to the client difficult. Besides, that
would require that each participant of the cluster performs
the same reads and checks, that would be an unwanted
overhead.
Instead, we read the schema state when constructing the raft
command, on the node which received the DDL statement from
the client. With this approach, two nodes could read their
local state machines, decide that the table does not exist
yet, and append identical commands for creating the table to
the Raft log. The second command will fail to apply to the
client state machine.
- if a leader or network fails when committing an operation to
Raft log, the client has no way of knowing its status. E.g. a
network can time out, and establishing whether or not the
majority of Raft nodes store the command in its log or have applied it
may be difficult.</p>
<p>For the two reasons above, Scylla uses an additional
algorithm for all schema changes which it propagates through Raft
which provides an ordered, at-most-once semantics of command
application.</p>
<p>This algorithm is using an own system table - <code class="docutils literal notranslate"><span class="pre">group0_history</span></code> - to
store its state.</p>
<p>The algorithm is adding a unique, monotonic, persistent state id
to each command that is committed to Raft log of the group 0 state
machine. This id is used
to ensure that no two concurrent commands based on the same (and
outdated) state of the client state machine are applied, and to
verify that a command is committed to Raft log in a situation of
uncertainty and retry the command if it failed.</p>
<p>Here’s how it works.</p>
<p>Each change to the schema state machine is “signed”, or augmented, with a
state id - a unique monotonic identifier of the change. The state
id is based on TIMEUUID. When the command is applied, the state id is
persisted in <code class="docutils literal notranslate"><span class="pre">group0_history</span></code> table. In addition to the new state id,
the previous state id is also saved in the command to check that
the command is applied against the correct state of the client
state machine.</p>
<p>In order to perform a schema change, the client, which can be any Scylla
node, performs the following steps:</p>
<ol class="simple">
<li><p>Takes a lock around its local client state machine, to protect against
concurrent operations of the state machine by different threads of
this node.</p></li>
<li><p>Issues a raft read barrier. This ensures this local client
state machine has all the commands added to Group 0 on other
nodes, up to the time of the barrier.</p></li>
<li><p>Reads <code class="docutils literal notranslate"><span class="pre">group0_history</span></code> table to find out the latest existing state id.</p></li>
<li><p>Creates a new state id, which would identify the new command. It
is strictly greater than the previous state id.</p></li>
<li><p>Reads the local state machine, validates and constructs a new command.
E.g. at this point, if we’re creating a new keyspace, we may find
that the keyspace already exists and return an error to the user.
Otherwise we’ll create a new mutation which adds the keyspace
to the system table.</p></li>
<li><p>Creates a command to store in Raft log, which bundles together
the mutation of the client state machine, the previous and the new
state ids.</p></li>
<li><p>When Raft commits the command to its log, each node will apply it
to its local schema state machine. At this point, verify that
the previous state id of the command matches the latest state
id of the local state machine, i.e. there was no race with another
Raft command from a different client, and if there is a match,
apply the command and append the new state id to <code class="docutils literal notranslate"><span class="pre">group0_history</span></code>,
otherwise turn the command into a no-op.</p></li>
<li><p>The client which generated the command waits for the
command to apply locally. If there was a timeout or error,
it can retry the command with the same state id until it gets
committed. If the state id is out of order, e.g. because there
were another state id committed since, or this state id is
itself already committed, applying the command turns into a
no-op. The state ids make the commands idempotent.
Once the command applies successfully, we can read the local
state machine and find out what happened with it using
<code class="docutils literal notranslate"><span class="pre">group0_history</span></code>. If the state id is recorded in the history,
the command is really executed, otherwise it turned into a no-op,
so the whole procedure needs to be restarted.</p></li>
</ol>
</section>

                
                    <div class="post-content"><div class="content-navigation">
    <div class="navigation navigation--prev">
        
            <a class="navigation__link" href="protocols.html">
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-left"></i>
                </button>
                <div class="navigation__title">
                    <span class="colored">PREVIOUS</span> <br />Ports and protocols in Scylla
                </div>
            </a>
        
    </div>
    <div class="navigation navigation--next">
        
            <a class="navigation__link" href="redis.html">
                <div class="navigation__title">
                    <span class="colored">NEXT</span> <br />Redis API in Scylla
                </div>
                <button class="navigation__button">
                    <i class="scylla-icon scylla-icon--chevron-right"></i>
                </button>
            </a>
        
    </div>
</div></div>
                
            </div>
            <div class="sidebar-left  large-order-1">
                
                    
                        <div id="side-nav" class="side-nav custom-scroll-bar" data-closable data-toggler=".show">
    <button class="collapsible-button">
        <i class="scylla-icon scylla-icon--chevron-left"></i>
    </button>
    <div class="side-nav-content">
        <div class="side-nav__search">
            <div class="search-box">
                <ci-search></ci-search>
            </div>
        </div>
        <div class="side-nav__versions">
    <ul class="dropdown menu scylla-dropdown scylla-dropdown--versions" data-dropdown-menu>
        <li class="scylla-dropdown__item">
            <a class="scylla-dropdown__title" href="#">
                
                    master
                
                <i class="chevron scylla-icon scylla-icon--chevron-right"></i>
            </a>
            <ul class="menu scylla-dropdown__content">
                
                    
                
                    
                        <li>
                            <a href="../../stable/index.html">4.6</a>
                        </li>
                    
                
                    
                        <li>
                            <a href="../../branch-4.5/index.html">4.5</a>
                        </li>
                    
                
                
            </ul>
        </li>
    </ul>
</div>
        <div class="side-nav__content">
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Scylla Developer Documentation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../alternator/alternator.html">Alternator: DynamoDB API in Scylla</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label for="toctree-checkbox-1"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../alternator/getting-started.html">Getting Started With ScyllaDB Alternator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../alternator/compatibility.html">Scylla Alternator for DynamoDB users</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="index.html">Design Notes</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label for="toctree-checkbox-2"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="IDL.html">IDL compiler</a></li>
<li class="toctree-l2"><a class="reference internal" href="cdc.html">CDC</a></li>
<li class="toctree-l2"><a class="reference internal" href="compaction_controller.html">The Compaction Controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="cql-extensions.html">Scylla CQL extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="cql-extensions-internal.html">Scylla CQL extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="cql3-type-mapping.html">CQL3 Type Mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="hinted_handoff_design.html">Hinted Handoff Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="isolation.html">Performance Isolation in Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="lua-type-mapping.html">CQL to Lua type mapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics.html">Scylla Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="migrating-from-users-to-roles.html">Migrating from users to roles</a></li>
<li class="toctree-l2"><a class="reference internal" href="paged-queries.html">Paged queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="parallel_aggregations.html">Parallel aggregations</a></li>
<li class="toctree-l2"><a class="reference internal" href="per-partition-rate-limit.html">Per-partition rate limiting</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocol-extensions.html">Protocol extensions to the Cassandra Native Protocol</a></li>
<li class="toctree-l2"><a class="reference internal" href="protocols.html">Ports and protocols in Scylla</a></li>
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Intro</a></li>
<li class="toctree-l2"><a class="reference internal" href="#raft-application-in-scylla">Raft application in Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="#the-group-0">The group 0</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-group-0-to-perform-schema-changes">Using Group 0 to perform schema changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="redis.html">Redis API in Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="repair_based_node_ops.html">Repair based node operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="reverse-reads.html">Reverse reads</a></li>
<li class="toctree-l2"><a class="reference internal" href="row_cache.html">Row Cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="row_level_repair.html">Row level repair</a></li>
<li class="toctree-l2"><a class="reference internal" href="rust.html">Rust and C++</a></li>
<li class="toctree-l2"><a class="reference internal" href="secondary_index.html">Secondary indexes in Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="service_levels.html">Service Level Distributed Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="sstable-scylla-format.html">File format of the Scylla.db sstable component</a></li>
<li class="toctree-l2"><a class="reference internal" href="sstables-directory-structure.html">sstables directory structure</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_keyspace.html">System keyspace layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_keyspace.html#virtual-tables-in-the-system-keyspace">Virtual tables in the system keyspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="system_schema_keyspace.html">System schema keyspace layout</a></li>
<li class="toctree-l2"><a class="reference internal" href="wasm.html">WASM support for user-defined functions</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label for="toctree-checkbox-3"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../guides/api_v2.html">Scylla RESTful API V2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/building.html">Building Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/debugging.html">Debugging with GDB</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/docker-hub.html">Docker Hub Image</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/logging.html">Logging in Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/tracing.html">Tracing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../guides/virtual-tables.html">Virtual Tables</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../contribute/index.html">Contribute</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label for="toctree-checkbox-4"><i class="scylla-icon scylla-icon--expand"></i></label><div class="break"></div><ul>
<li class="toctree-l2"><a class="reference internal" href="../contribute/CONTRIBUTING.html">Contributing to Scylla</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/backport.html">Backport</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/maintainer.html">Maintainer’s handbook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../contribute/review-checklist.html">Review Checklist</a></li>
</ul>
</li>
</ul>

        </div>
    </div>
</div>
                    
                
            </div>
            
                <div class="sidebar-right large-order-3">
                    <div class="secondary-side-nav custom-scroll-bar">
    
    <ul class="contribute">
        <li class="contribute__item">
            <a href="https://github.com/scylladb/scylla/issues/new?title=Issue in page Intro&&body=I%20would%20like%20to%20report%20an%20issue%20in%20page%20https://scylla.docs.scylladb.com/master/design-notes/raft-in-scylla%0A%0A%23%23%23%20Problem%0A%0A%23%23%23%20%20Suggest%20a%20fix"
                target="_blank">
                <i class="icon fab fa-github" aria-hidden="true"></i>Create an issue
            </a>
        </li>
        
            <li class="contribute__item">
                
                
                    
                        
                    
                
                <a href="https://github.com/scylladb/scylla/edit/master/docs/design-notes/raft-in-scylla.md"
                    target="_blank">
                    <i class="icon fa fa-edit" aria-hidden="true"></i>Edit this page
                </a>
            </li>
        
    </ul>

    
        <div class="secondary-side-nav__content">
            <p class="topic-title">On this page</p>
            <ul>
<li><a class="reference internal" href="#">Intro</a></li>
<li><a class="reference internal" href="#raft-application-in-scylla">Raft application in Scylla</a></li>
<li><a class="reference internal" href="#the-group-0">The group 0</a><ul>
<li><a class="reference internal" href="#establishing-group-0-in-a-fresh-cluster">Establishing group 0 in a fresh cluster</a></li>
</ul>
</li>
<li><a class="reference internal" href="#using-group-0-to-perform-schema-changes">Using Group 0 to perform schema changes</a></li>
</ul>

        </div>
    
</div>
                </div>
            
        </section>

        <footer class="footer">
    <div class="footer-group">
        <div class="footer-top">
            <a class="footer-logo" href="https://www.scylladb.com">
                <img src="../_static/img/logo-scylla-horizontal-RGB.svg" alt="Logo" />
            </a>
            <div class="footer-links">
                <a class="footer-links__link" href="https://docs.scylladb.com/">Docs</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/contact-us/">Contact Us</a>
                <a class="footer-links__link" href="https://www.scylladb.com/company/">About Us</a>
            </div>
            <div class="footer-actions">
                <a class="footer-actions__link" href="https://groups.google.com/g/scylladb-users" target="_blank">
                    <span data-tooltip tabindex="1" title="User mailing list" data-position="bottom">
                        <img src="../_static/img/icons/icon-mail-list.svg" alt="Mail List Icon" />
                    </span>
                </a>
                <a class="footer-actions__link" href="http://slack.scylladb.com/" target="_blank">
                    <span data-tooltip tabindex="1" title="User Slack channel" data-position="bottom">
                        <img src="../_static/img/icons/icon-slack.svg" alt="Slack Icon" />
                    </span>
                </a>
            </div>
        </div>

        <div class="footer-bottom">
            
                <div class="footer-bottom__copyright">
                    
                        
                            &#169; 2022, ScyllaDB. All rights reserved.
                        
                    
                </div>
            
            
                <div class="footer-bottom__last-updated">
                    
                        Last updated on 28 June 2022.
                    
                </div>
            
            <div class="footer-bottom__version">
                Powered by
                <a href="http://sphinx-doc.org/">Sphinx 4.3.2</a> &amp;
                <a href="https://sphinx-theme.scylladb.com/">ScyllaDB Theme 1.2.2</a>
            </div>
        </div>
    </div>
</footer>

        <noscript>
            <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T8P2JP" height="0" width="0"
                style="display: none; visibility: hidden"></iframe>
        </noscript>
    </body>

</html>